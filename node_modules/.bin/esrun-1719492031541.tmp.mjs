process.argv = [process.argv[0], ...process.argv.slice(3)];

		import __esrun_url from 'url';

		import { createRequire as __esrun_createRequire } from "module";

		const __esrun_fileUrl = __esrun_url.pathToFileURL("\Users\p01\GITHUB\TypeScript2\node_modules\.bin\esrun-1719492031541.tmp.mjs");

		const require = __esrun_createRequire(__esrun_fileUrl);
// main.ts
import axios from "../../node_modules/axios/index.js";
import * as cheerio from "../../node_modules/cheerio/lib/esm/index.js";
import { appendFile } from "fs";
var line = [];
var watched = [];
var buffer = [];
var removed = [];
var error = [];
async function scrapeHrefAttributesFromWebsite(url) {
  try {
    let response = await axios.get(url);
    const $ = cheerio.load(response.data);
    const links = $("a");
    const hrefs = [];
    links.each((_, link) => {
      const href = $(link).attr("href");
      if (href) {
        if (href.includes("https://")) {
          hrefs.push(href);
        } else {
          hrefs.push(getBaseUrl(url) + href);
        }
      }
    });
    return hrefs;
  } catch (err) {
    error.push(url);
    return [];
  }
}
function getBaseUrl(url) {
  try {
    const parsedUrl = new URL(url);
    return `${parsedUrl.protocol}//${parsedUrl.hostname}`;
  } catch (error2) {
    return "";
  }
}
(async () => {
  const url = "https://transresult.de";
  const hrefs = await scrapeHrefAttributesFromWebsite(url);
  hrefs.forEach((element) => {
    if (url !== element) {
      line.push(element);
    }
  });
  console.log(`${line.length}`);
  while (line.length !== 0 || buffer.length !== 0) {
    const currentUrl = line.shift();
    if (!currentUrl)
      continue;
    try {
      if (!watched.includes(currentUrl)) {
        const hrefs2 = await scrapeHrefAttributesFromWebsite(currentUrl);
        hrefs2.forEach((element) => {
          if (url != element) {
            if (!watched.includes(element)) {
              line.push(element);
            } else {
              removed.push(element);
            }
          }
        });
        line.forEach((element) => {
          if (watched.includes(element)) {
            line.splice(line.indexOf(element), 1);
            removed.push(element);
          }
        });
        if (line.length >= 1e3) {
          line.forEach((element) => {
            buffer.push(element);
          });
          line = [];
          while (line.length <= 100) {
            const buffer_url = buffer.shift();
            line.push(buffer_url);
          }
        } else if (line.length == 0) {
          while (line.length <= 20) {
            const buffer_url = buffer.shift();
            line.push(buffer_url);
          }
        }
        watched.push(currentUrl);
        appendFile("log.txt", `${line.length} in active queue; ${buffer.length} in buffer; ${watched.length} watched; ${removed.length} removed; ${removed.length + watched.length} processed; ${error.length} with errors; Base: ${getBaseUrl(currentUrl)}: Got: ${currentUrl} 
`, function(err) {
          if (err) {
          } else {
            console.log(`${line.length} in active queue; ${buffer.length} in buffer; ${watched.length} watched; ${removed.length} removed; ${removed.length + watched.length} processed; ${error.length} with errors; Base: ${getBaseUrl(currentUrl)}`);
          }
        });
      } else {
        removed.push(currentUrl);
      }
    } catch (err) {
      error.push(currentUrl);
      continue;
    }
  }
})();
//# sourceMappingURL=data:application/json;base64,ewogICJ2ZXJzaW9uIjogMywKICAic291cmNlcyI6IFsibWFpbi50cyJdLAogICJzb3VyY2VSb290IjogIkM6XFxVc2Vyc1xccDAxXFxHSVRIVUJcXFR5cGVTY3JpcHQyIiwKICAic291cmNlc0NvbnRlbnQiOiBbImltcG9ydCBheGlvcyBmcm9tIFwiYXhpb3NcIjtcclxuaW1wb3J0ICogYXMgY2hlZXJpbyBmcm9tIFwiY2hlZXJpb1wiO1xyXG5pbXBvcnQgeyBhcHBlbmRGaWxlIH0gZnJvbSBcImZzXCI7XHJcblxyXG5cclxubGV0IGxpbmU6IHN0cmluZ1tdID0gW107XHJcbmxldCB3YXRjaGVkOiBzdHJpbmdbXSA9IFtdO1xyXG5sZXQgYnVmZmVyOiBzdHJpbmdbXSA9IFtdXHJcbmxldCByZW1vdmVkOiBzdHJpbmdbXSA9IFtdO1xyXG5sZXQgZXJyb3I6IHN0cmluZ1tdID0gW107XHJcblxyXG5cclxuYXN5bmMgZnVuY3Rpb24gc2NyYXBlSHJlZkF0dHJpYnV0ZXNGcm9tV2Vic2l0ZSh1cmw6IHN0cmluZyk6IFByb21pc2U8c3RyaW5nW10+IHtcclxuICAgIHRyeSB7XHJcbiAgICAgICAgXHJcbiAgICAgICAgLy8gRmV0Y2ggdGhlIHdlYnBhZ2UgY29udGVudFxyXG4gICAgICAgIGxldCByZXNwb25zZSA9IGF3YWl0IGF4aW9zLmdldCh1cmwpO1xyXG5cclxuICAgICAgICAvLyBMb2FkIHRoZSBmZXRjaGVkIEhUTUwgY29udGVudCBpbnRvIENoZWVyaW9cclxuICAgICAgICBjb25zdCAkID0gY2hlZXJpby5sb2FkKHJlc3BvbnNlLmRhdGEpO1xyXG4gICAgICAgIFxyXG4gICAgICAgIC8vIFNlbGVjdCBhbGwgPGE+IHRhZ3MgYW5kIGV4dHJhY3QgaHJlZiBhdHRyaWJ1dGVzXHJcbiAgICAgICAgY29uc3QgbGlua3MgPSAkKCdhJyk7IC8vIEFkanVzdCB0aGUgc2VsZWN0b3IgYXMgbmVlZGVkXHJcbiAgICAgICAgY29uc3QgaHJlZnM6IHN0cmluZ1tdID0gW107XHJcblxyXG4gICAgICAgIGxpbmtzLmVhY2goKF8sIGxpbmspID0+IHtcclxuICAgICAgICAgICAgY29uc3QgaHJlZiA9ICQobGluaykuYXR0cignaHJlZicpO1xyXG4gICAgICAgICAgICBpZiAoaHJlZikge1xyXG4gICAgICAgICAgICAgICAgaWYgKGhyZWYuaW5jbHVkZXMoXCJodHRwczovL1wiKSkge1xyXG4gICAgICAgICAgICAgICAgICAgIGhyZWZzLnB1c2goaHJlZik7XHJcbiAgICAgICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgICAgIGhyZWZzLnB1c2goZ2V0QmFzZVVybCh1cmwpICsgaHJlZik7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgcmV0dXJuIGhyZWZzO1xyXG4gICAgfSBjYXRjaCAoZXJyKSB7XHJcbiAgICAgICAgZXJyb3IucHVzaCh1cmwpO1xyXG4gICAgICAgIHJldHVybiBbXTtcclxuICAgIH1cclxufVxyXG5cclxuXHJcbmZ1bmN0aW9uIGdldEJhc2VVcmwodXJsOiBzdHJpbmcpOiBzdHJpbmcge1xyXG4gICAgdHJ5IHtcclxuICAgICAgICBjb25zdCBwYXJzZWRVcmwgPSBuZXcgVVJMKHVybCk7XHJcbiAgICAgICAgcmV0dXJuIGAke3BhcnNlZFVybC5wcm90b2NvbH0vLyR7cGFyc2VkVXJsLmhvc3RuYW1lfWA7XHJcbiAgICB9IGNhdGNoIChlcnJvcikge1xyXG4gICAgICAgIHJldHVybiAnJztcclxuICAgIH1cclxufVxyXG5cclxuLy8gRXhhbXBsZSB1c2FnZVxyXG4oYXN5bmMgKCkgPT4ge1xyXG4gICAgY29uc3QgdXJsID0gJ2h0dHBzOi8vdHJhbnNyZXN1bHQuZGUnO1xyXG4gICAgY29uc3QgaHJlZnMgPSBhd2FpdCBzY3JhcGVIcmVmQXR0cmlidXRlc0Zyb21XZWJzaXRlKHVybCk7XHJcblxyXG4gICAgaHJlZnMuZm9yRWFjaChlbGVtZW50ID0+IHtcclxuICAgICAgICBpZiAodXJsICE9PSBlbGVtZW50KSB7XHJcbiAgICAgICAgICAgIGxpbmUucHVzaChlbGVtZW50KTtcclxuICAgICAgICB9XHJcbiAgICB9KTtcclxuXHJcbiAgICBjb25zb2xlLmxvZyhgJHtsaW5lLmxlbmd0aH1gKTtcclxuXHJcbiAgICB3aGlsZSAobGluZS5sZW5ndGggIT09IDAgfHwgYnVmZmVyLmxlbmd0aCAhPT0gMCkge1xyXG4gICAgICAgIC8vIFdhaXQgZm9yIHRoZSBhc3luYyBmdW5jdGlvbiB0byBjb21wbGV0ZVxyXG4gICAgICAgIGNvbnN0IGN1cnJlbnRVcmwgPSBsaW5lLnNoaWZ0KCk7IC8vIEdldCBhbmQgcmVtb3ZlIHRoZSBmaXJzdCBlbGVtZW50IGZyb20gdGhlIGxpbmUgYXJyYXlcclxuICAgICAgICBpZiAoIWN1cnJlbnRVcmwpIGNvbnRpbnVlO1xyXG4gICAgICAgIHRyeSB7XHJcbiAgICAgICAgICAgIGlmICghd2F0Y2hlZC5pbmNsdWRlcyhjdXJyZW50VXJsKSkge1xyXG4gICAgICAgICAgICAgICAgY29uc3QgaHJlZnMgPSBhd2FpdCBzY3JhcGVIcmVmQXR0cmlidXRlc0Zyb21XZWJzaXRlKGN1cnJlbnRVcmwpO1xyXG4gICAgICAgICAgICAgICAgaHJlZnMuZm9yRWFjaChlbGVtZW50ID0+IHtcclxuICAgICAgICAgICAgICAgICAgICBpZiAodXJsICE9IGVsZW1lbnQpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKCF3YXRjaGVkLmluY2x1ZGVzKGVsZW1lbnQpKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBsaW5lLnB1c2goZWxlbWVudCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH1lbHNlIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJlbW92ZWQucHVzaChlbGVtZW50KTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIH0pO1xyXG5cclxuICAgICAgICAgICAgICAgIGxpbmUuZm9yRWFjaCgoZWxlbWVudCkgPT4ge1xyXG4gICAgICAgICAgICAgICAgICAgIGlmICh3YXRjaGVkLmluY2x1ZGVzKGVsZW1lbnQpKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGxpbmUuc3BsaWNlKGxpbmUuaW5kZXhPZihlbGVtZW50KSwgMSk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHJlbW92ZWQucHVzaChlbGVtZW50KTtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgICAgICAgICBpZiAobGluZS5sZW5ndGggPj0gMTAwMCkge1xyXG4gICAgICAgICAgICAgICAgICAgIGxpbmUuZm9yRWFjaCgoZWxlbWVudCkgPT4ge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBidWZmZXIucHVzaChlbGVtZW50KVxyXG4gICAgICAgICAgICAgICAgICAgIH0pXHJcbiAgICAgICAgICAgICAgICAgICAgbGluZSA9IFtdO1xyXG5cclxuICAgICAgICAgICAgICAgICAgICBcclxuICAgICAgICAgICAgICAgICAgICB3aGlsZSAobGluZS5sZW5ndGggPD0gMTAwKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IGJ1ZmZlcl91cmw6IHN0cmluZyA9IGJ1ZmZlci5zaGlmdCgpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBsaW5lLnB1c2goYnVmZmVyX3VybCk7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgfSBlbHNlIGlmIChsaW5lLmxlbmd0aCA9PSAwKSB7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgIHdoaWxlIChsaW5lLmxlbmd0aCA8PSAyMCkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBjb25zdCBidWZmZXJfdXJsOiBzdHJpbmcgPSBidWZmZXIuc2hpZnQoKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgbGluZS5wdXNoKGJ1ZmZlcl91cmwpO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIH1cclxuICAgIFxyXG4gICAgICAgICAgICAgICAgXHJcbiAgICAgICAgICAgICAgICB3YXRjaGVkLnB1c2goY3VycmVudFVybCk7XHJcbiAgICAgICAgICAgICAgICBhcHBlbmRGaWxlKFwibG9nLnR4dFwiLCBgJHtsaW5lLmxlbmd0aH0gaW4gYWN0aXZlIHF1ZXVlOyAke2J1ZmZlci5sZW5ndGh9IGluIGJ1ZmZlcjsgJHt3YXRjaGVkLmxlbmd0aH0gd2F0Y2hlZDsgJHtyZW1vdmVkLmxlbmd0aH0gcmVtb3ZlZDsgJHtyZW1vdmVkLmxlbmd0aCArIHdhdGNoZWQubGVuZ3RofSBwcm9jZXNzZWQ7ICR7ZXJyb3IubGVuZ3RofSB3aXRoIGVycm9yczsgQmFzZTogJHtnZXRCYXNlVXJsKGN1cnJlbnRVcmwpfTogR290OiAke2N1cnJlbnRVcmx9IFxcbmAsIGZ1bmN0aW9uKGVycikge1xyXG4gICAgICAgICAgICAgICAgICAgIGlmIChlcnIpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgLy8gYXBwZW5kIGZhaWxlZFxyXG4gICAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgLy8gZG9uZVxyXG4gICAgICAgICAgICAgICAgICAgICAgICBjb25zb2xlLmxvZyhgJHtsaW5lLmxlbmd0aH0gaW4gYWN0aXZlIHF1ZXVlOyAke2J1ZmZlci5sZW5ndGh9IGluIGJ1ZmZlcjsgJHt3YXRjaGVkLmxlbmd0aH0gd2F0Y2hlZDsgJHtyZW1vdmVkLmxlbmd0aH0gcmVtb3ZlZDsgJHtyZW1vdmVkLmxlbmd0aCArIHdhdGNoZWQubGVuZ3RofSBwcm9jZXNzZWQ7ICR7ZXJyb3IubGVuZ3RofSB3aXRoIGVycm9yczsgQmFzZTogJHtnZXRCYXNlVXJsKGN1cnJlbnRVcmwpfWApO1xyXG4gICAgICAgICAgICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgICAgIH0pO1xyXG5cclxuICAgICAgICAgICAgfWVsc2Uge1xyXG4gICAgICAgICAgICAgICAgcmVtb3ZlZC5wdXNoKGN1cnJlbnRVcmwpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfSBjYXRjaCAoZXJyKSB7XHJcbiAgICAgICAgICAgIGVycm9yLnB1c2goY3VycmVudFVybClcclxuICAgICAgICAgICAgY29udGludWU7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG59KSgpO1xyXG4iXSwKICAibWFwcGluZ3MiOiAiO0FBQUEsT0FBTyxXQUFXO0FBQ2xCLFlBQVksYUFBYTtBQUN6QixTQUFTLGtCQUFrQjtBQUczQixJQUFJLE9BQWlCLENBQUM7QUFDdEIsSUFBSSxVQUFvQixDQUFDO0FBQ3pCLElBQUksU0FBbUIsQ0FBQztBQUN4QixJQUFJLFVBQW9CLENBQUM7QUFDekIsSUFBSSxRQUFrQixDQUFDO0FBR3ZCLGVBQWUsZ0NBQWdDLEtBQWdDO0FBQzNFLE1BQUk7QUFHQSxRQUFJLFdBQVcsTUFBTSxNQUFNLElBQUksR0FBRztBQUdsQyxVQUFNLElBQVksYUFBSyxTQUFTLElBQUk7QUFHcEMsVUFBTSxRQUFRLEVBQUUsR0FBRztBQUNuQixVQUFNLFFBQWtCLENBQUM7QUFFekIsVUFBTSxLQUFLLENBQUMsR0FBRyxTQUFTO0FBQ3BCLFlBQU0sT0FBTyxFQUFFLElBQUksRUFBRSxLQUFLLE1BQU07QUFDaEMsVUFBSSxNQUFNO0FBQ04sWUFBSSxLQUFLLFNBQVMsVUFBVSxHQUFHO0FBQzNCLGdCQUFNLEtBQUssSUFBSTtBQUFBLFFBQ25CLE9BQU87QUFDSCxnQkFBTSxLQUFLLFdBQVcsR0FBRyxJQUFJLElBQUk7QUFBQSxRQUNyQztBQUFBLE1BQ0o7QUFBQSxJQUNKLENBQUM7QUFFRCxXQUFPO0FBQUEsRUFDWCxTQUFTLEtBQVA7QUFDRSxVQUFNLEtBQUssR0FBRztBQUNkLFdBQU8sQ0FBQztBQUFBLEVBQ1o7QUFDSjtBQUdBLFNBQVMsV0FBVyxLQUFxQjtBQUNyQyxNQUFJO0FBQ0EsVUFBTSxZ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

	