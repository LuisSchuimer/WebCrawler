process.argv = [process.argv[0], ...process.argv.slice(3)];

		import __esrun_url from 'url';

		import { createRequire as __esrun_createRequire } from "module";

		const __esrun_fileUrl = __esrun_url.pathToFileURL("\Users\p01\GITHUB\TypeScript2\node_modules\.bin\esrun-1719488148023.tmp.mjs");

		const require = __esrun_createRequire(__esrun_fileUrl);
// main.ts
import axios from "../../node_modules/axios/index.js";
import * as cheerio from "../../node_modules/cheerio/lib/esm/index.js";
import { appendFile } from "fs";
var line = [];
var watched = [];
var removed = [];
var notfound = [];
async function scrapeHrefAttributesFromWebsite(url) {
  try {
    let response = await axios.get(url);
    const $ = cheerio.load(response.data);
    const links = $("a");
    const hrefs = [];
    links.each((_, link) => {
      const href = $(link).attr("href");
      if (href) {
        if (href.includes("https://")) {
          hrefs.push(href);
        } else {
          hrefs.push(getBaseUrl(url) + href);
        }
      }
    });
    return hrefs;
  } catch (error) {
    if (error.response.status == 404) {
      notfound.push(url);
    }
    return [];
  }
}
function getBaseUrl(url) {
  try {
    const parsedUrl = new URL(url);
    return `${parsedUrl.protocol}//${parsedUrl.hostname}`;
  } catch (error) {
    return "";
  }
}
(async () => {
  const url = "https://apple.com";
  const hrefs = await scrapeHrefAttributesFromWebsite(url);
  hrefs.forEach((element) => {
    if (url !== element) {
      line.push(element);
    }
  });
  console.log(`${line.length}`);
  while (line.length !== 0) {
    const currentUrl = line.shift();
    if (!currentUrl)
      continue;
    try {
      if (!watched.includes(currentUrl)) {
        const hrefs2 = await scrapeHrefAttributesFromWebsite(currentUrl);
        hrefs2.forEach((element) => {
          if (url != element) {
            if (!watched.includes(element)) {
              line.push(element);
            } else {
              removed.push(element);
            }
          }
        });
        line.forEach((element) => {
          if (watched.includes(element)) {
            line.splice(line.indexOf(element), 1);
            removed.push(element);
          }
        });
        watched.push(currentUrl);
        appendFile("log.txt", `${line.length} in queue; ${watched.length} watched; ${removed.length} removed; ${removed.length + watched.length} processed; Base: ${getBaseUrl(currentUrl)}: Got: ${currentUrl} 
`, function(err) {
          if (err) {
          } else {
            console.log(`${line.length} in queue; ${watched.length} watched; ${removed.length} removed; ${removed.length + watched.length} processed; Not found: ${notfound.length}; Base: ${getBaseUrl(currentUrl)}`);
          }
        });
      } else {
        removed.push(currentUrl);
      }
    } catch (error) {
      continue;
    }
  }
})();
//# sourceMappingURL=data:application/json;base64,ewogICJ2ZXJzaW9uIjogMywKICAic291cmNlcyI6IFsibWFpbi50cyJdLAogICJzb3VyY2VSb290IjogIkM6XFxVc2Vyc1xccDAxXFxHSVRIVUJcXFR5cGVTY3JpcHQyIiwKICAic291cmNlc0NvbnRlbnQiOiBbImltcG9ydCBheGlvcyBmcm9tIFwiYXhpb3NcIjtcclxuaW1wb3J0ICogYXMgY2hlZXJpbyBmcm9tIFwiY2hlZXJpb1wiO1xyXG5pbXBvcnQgeyBhcHBlbmRGaWxlIH0gZnJvbSBcImZzXCI7XHJcblxyXG5cclxubGV0IGxpbmU6IHN0cmluZ1tdID0gW107XHJcbmxldCB3YXRjaGVkOiBzdHJpbmdbXSA9IFtdO1xyXG5sZXQgcmVtb3ZlZDogc3RyaW5nW10gPSBbXTtcclxubGV0IG5vdGZvdW5kOiBzdHJpbmdbXSA9IFtdO1xyXG5cclxuXHJcbmFzeW5jIGZ1bmN0aW9uIHNjcmFwZUhyZWZBdHRyaWJ1dGVzRnJvbVdlYnNpdGUodXJsOiBzdHJpbmcpOiBQcm9taXNlPHN0cmluZ1tdPiB7XHJcbiAgICB0cnkge1xyXG4gICAgICAgIFxyXG4gICAgICAgIC8vIEZldGNoIHRoZSB3ZWJwYWdlIGNvbnRlbnRcclxuICAgICAgICBsZXQgcmVzcG9uc2UgPSBhd2FpdCBheGlvcy5nZXQodXJsKTtcclxuXHJcbiAgICAgICAgLy8gTG9hZCB0aGUgZmV0Y2hlZCBIVE1MIGNvbnRlbnQgaW50byBDaGVlcmlvXHJcbiAgICAgICAgY29uc3QgJCA9IGNoZWVyaW8ubG9hZChyZXNwb25zZS5kYXRhKTtcclxuICAgICAgICBcclxuICAgICAgICAvLyBTZWxlY3QgYWxsIDxhPiB0YWdzIGFuZCBleHRyYWN0IGhyZWYgYXR0cmlidXRlc1xyXG4gICAgICAgIGNvbnN0IGxpbmtzID0gJCgnYScpOyAvLyBBZGp1c3QgdGhlIHNlbGVjdG9yIGFzIG5lZWRlZFxyXG4gICAgICAgIGNvbnN0IGhyZWZzOiBzdHJpbmdbXSA9IFtdO1xyXG5cclxuICAgICAgICBsaW5rcy5lYWNoKChfLCBsaW5rKSA9PiB7XHJcbiAgICAgICAgICAgIGNvbnN0IGhyZWYgPSAkKGxpbmspLmF0dHIoJ2hyZWYnKTtcclxuICAgICAgICAgICAgaWYgKGhyZWYpIHtcclxuICAgICAgICAgICAgICAgIGlmIChocmVmLmluY2x1ZGVzKFwiaHR0cHM6Ly9cIikpIHtcclxuICAgICAgICAgICAgICAgICAgICBocmVmcy5wdXNoKGhyZWYpO1xyXG4gICAgICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgICAgICBocmVmcy5wdXNoKGdldEJhc2VVcmwodXJsKSArIGhyZWYpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfSk7XHJcblxyXG4gICAgICAgIHJldHVybiBocmVmcztcclxuICAgIH0gY2F0Y2ggKGVycm9yKSB7XHJcbiAgICAgICAgaWYgKGVycm9yLnJlc3BvbnNlLnN0YXR1cyA9PSA0MDQpIHtcclxuICAgICAgICAgICAgbm90Zm91bmQucHVzaCh1cmwpO1xyXG4gICAgICAgIH0gXHJcbiAgICAgICAgcmV0dXJuIFtdO1xyXG4gICAgfVxyXG59XHJcblxyXG5cclxuZnVuY3Rpb24gZ2V0QmFzZVVybCh1cmw6IHN0cmluZyk6IHN0cmluZyB7XHJcbiAgICB0cnkge1xyXG4gICAgICAgIGNvbnN0IHBhcnNlZFVybCA9IG5ldyBVUkwodXJsKTtcclxuICAgICAgICByZXR1cm4gYCR7cGFyc2VkVXJsLnByb3RvY29sfS8vJHtwYXJzZWRVcmwuaG9zdG5hbWV9YDtcclxuICAgIH0gY2F0Y2ggKGVycm9yKSB7XHJcbiAgICAgICAgcmV0dXJuICcnO1xyXG4gICAgfVxyXG59XHJcblxyXG4vLyBFeGFtcGxlIHVzYWdlXHJcbihhc3luYyAoKSA9PiB7XHJcbiAgICBjb25zdCB1cmwgPSAnaHR0cHM6Ly9hcHBsZS5jb20nO1xyXG4gICAgY29uc3QgaHJlZnMgPSBhd2FpdCBzY3JhcGVIcmVmQXR0cmlidXRlc0Zyb21XZWJzaXRlKHVybCk7XHJcblxyXG4gICAgaHJlZnMuZm9yRWFjaChlbGVtZW50ID0+IHtcclxuICAgICAgICBpZiAodXJsICE9PSBlbGVtZW50KSB7XHJcbiAgICAgICAgICAgIGxpbmUucHVzaChlbGVtZW50KTtcclxuICAgICAgICB9XHJcbiAgICB9KTtcclxuXHJcbiAgICBjb25zb2xlLmxvZyhgJHtsaW5lLmxlbmd0aH1gKTtcclxuXHJcbiAgICB3aGlsZSAobGluZS5sZW5ndGggIT09IDApIHtcclxuICAgICAgICAvLyBXYWl0IGZvciB0aGUgYXN5bmMgZnVuY3Rpb24gdG8gY29tcGxldGVcclxuICAgICAgICBjb25zdCBjdXJyZW50VXJsID0gbGluZS5zaGlmdCgpOyAvLyBHZXQgYW5kIHJlbW92ZSB0aGUgZmlyc3QgZWxlbWVudCBmcm9tIHRoZSBsaW5lIGFycmF5XHJcbiAgICAgICAgaWYgKCFjdXJyZW50VXJsKSBjb250aW51ZTtcclxuXHJcbiAgICAgICAgdHJ5IHtcclxuICAgICAgICAgICAgaWYgKCF3YXRjaGVkLmluY2x1ZGVzKGN1cnJlbnRVcmwpKSB7XHJcbiAgICAgICAgICAgICAgICBjb25zdCBocmVmcyA9IGF3YWl0IHNjcmFwZUhyZWZBdHRyaWJ1dGVzRnJvbVdlYnNpdGUoY3VycmVudFVybCk7XHJcbiAgICAgICAgICAgICAgICBocmVmcy5mb3JFYWNoKGVsZW1lbnQgPT4ge1xyXG4gICAgICAgICAgICAgICAgICAgIGlmICh1cmwgIT0gZWxlbWVudCkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoIXdhdGNoZWQuaW5jbHVkZXMoZWxlbWVudCkpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGxpbmUucHVzaChlbGVtZW50KTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgfWVsc2Uge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcmVtb3ZlZC5wdXNoKGVsZW1lbnQpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgfSk7XHJcblxyXG4gICAgICAgICAgICAgICAgbGluZS5mb3JFYWNoKChlbGVtZW50KSA9PiB7XHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKHdhdGNoZWQuaW5jbHVkZXMoZWxlbWVudCkpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgbGluZS5zcGxpY2UobGluZS5pbmRleE9mKGVsZW1lbnQpLCAxKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgcmVtb3ZlZC5wdXNoKGVsZW1lbnQpO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgXHJcbiAgICAgICAgICAgICAgICBcclxuICAgICAgICAgICAgICAgIHdhdGNoZWQucHVzaChjdXJyZW50VXJsKTtcclxuICAgICAgICAgICAgICAgIGFwcGVuZEZpbGUoXCJsb2cudHh0XCIsIGAke2xpbmUubGVuZ3RofSBpbiBxdWV1ZTsgJHt3YXRjaGVkLmxlbmd0aH0gd2F0Y2hlZDsgJHtyZW1vdmVkLmxlbmd0aH0gcmVtb3ZlZDsgJHtyZW1vdmVkLmxlbmd0aCArIHdhdGNoZWQubGVuZ3RofSBwcm9jZXNzZWQ7IEJhc2U6ICR7Z2V0QmFzZVVybChjdXJyZW50VXJsKX06IEdvdDogJHtjdXJyZW50VXJsfSBcXG5gLCBmdW5jdGlvbihlcnIpIHtcclxuICAgICAgICAgICAgICAgICAgICBpZiAoZXJyKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIC8vIGFwcGVuZCBmYWlsZWRcclxuICAgICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIC8vIGRvbmVcclxuICAgICAgICAgICAgICAgICAgICAgICAgY29uc29sZS5sb2coYCR7bGluZS5sZW5ndGh9IGluIHF1ZXVlOyAke3dhdGNoZWQubGVuZ3RofSB3YXRjaGVkOyAke3JlbW92ZWQubGVuZ3RofSByZW1vdmVkOyAke3JlbW92ZWQubGVuZ3RoICsgd2F0Y2hlZC5sZW5ndGh9IHByb2Nlc3NlZDsgTm90IGZvdW5kOiAke25vdGZvdW5kLmxlbmd0aH07IEJhc2U6ICR7Z2V0QmFzZVVybChjdXJyZW50VXJsKX1gKTtcclxuICAgICAgICAgICAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgICAgICAgICBcclxuICAgICAgICAgICAgfWVsc2Uge1xyXG4gICAgICAgICAgICAgICAgcmVtb3ZlZC5wdXNoKGN1cnJlbnRVcmwpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfSBjYXRjaCAoZXJyb3IpIHtcclxuICAgICAgICAgICAgY29udGludWU7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG59KSgpO1xyXG4iXSwKICAibWFwcGluZ3MiOiAiO0FBQUEsT0FBTyxXQUFXO0FBQ2xCLFlBQVksYUFBYTtBQUN6QixTQUFTLGtCQUFrQjtBQUczQixJQUFJLE9BQWlCLENBQUM7QUFDdEIsSUFBSSxVQUFvQixDQUFDO0FBQ3pCLElBQUksVUFBb0IsQ0FBQztBQUN6QixJQUFJLFdBQXFCLENBQUM7QUFHMUIsZUFBZSxnQ0FBZ0MsS0FBZ0M7QUFDM0UsTUFBSTtBQUdBLFFBQUksV0FBVyxNQUFNLE1BQU0sSUFBSSxHQUFHO0FBR2xDLFVBQU0sSUFBWSxhQUFLLFNBQVMsSUFBSTtBQUdwQyxVQUFNLFFBQVEsRUFBRSxHQUFHO0FBQ25CLFVBQU0sUUFBa0IsQ0FBQztBQUV6QixVQUFNLEtBQUssQ0FBQyxHQUFHLFNBQVM7QUFDcEIsWUFBTSxPQUFPLEVBQUUsSUFBSSxFQUFFLEtBQUssTUFBTTtBQUNoQyxVQUFJLE1BQU07QUFDTixZQUFJLEtBQUssU0FBUyxVQUFVLEdBQUc7QUFDM0IsZ0JBQU0sS0FBSyxJQUFJO0FBQUEsUUFDbkIsT0FBTztBQUNILGdCQUFNLEtBQUssV0FBVyxHQUFHLElBQUksSUFBSTtBQUFBLFFBQ3JDO0FBQUEsTUFDSjtBQUFBLElBQ0osQ0FBQztBQUVELFdBQU87QUFBQSxFQUNYLFNBQVMsT0FBUDtBQUNFLFFBQUksTUFBTSxTQUFTLFVBQVUsS0FBSztBQUM5QixlQUFTLEtBQUssR0FBRztBQUFBLElBQ3JCO0FBQ0EsV0FBTyxDQUFDO0FBQUEsRUFDWjtBQUNKO0FBR0EsU0FBUyxXQUFXLEtBQXFCO0FBQ3JDLE1BQUk7QUFDQSxVQUFNLFlBQVksSUFBSSxJQUFJLEdBQUc7QUFDN0IsV0FBTyxHQUFHLFVBQVUsYUFBYSxVQUFVO0FBQUEsRUFDL0MsU0FBUyxPQUFQO0FBQ0UsV0FBTztBQUFBLEVBQ1g7QUFDSjtBQUFBLENBR0MsWUFBWTtBQUNULFFBQU0sTUFBTTtBQUNaLFFBQU0sUUFBUSxNQUFNLGdDQUFnQyxHQUFHO0FBRXZELFFBQU0sUUFBUSxhQUFXO0FBQ3JCLFFBQUksUUFBUSxTQUFTO0FBQ2pCLFdBQUssS0FBSyxPQUFPO0FBQUEsSUFDckI7QUFBQSxFQUNKLENBQUM7QUFFRCxVQUFRLElBQUksR0FBRyxLQUFLLFFBQVE7QUFFNUIsU0FBTyxLQUFLLFdBQVcsR0FBRztBQUV0QixVQUFNLGFBQWEsS0FBSyxNQUFNO0FBQzlCLFFBQUksQ0FBQztBQUFZO0FBRWpCLFFBQUk7QUFDQSxVQUFJLENBQUMsUUFBUSxTQUFTLFVBQVUsR0FBRztBQUMvQixjQUFNQSxTQUFRLE1BQU0sZ0NBQWdDLFVBQVU7QUFDOUQsUUFBQUEsT0FBTSxRQUFRLGFBQVc7QUFDckIsY0FBSSxPQUFPLFNBQVM7QUFDaEIsZ0JBQUksQ0FBQyxRQUFRLFNBQVMsT0FBTyxHQUFHO0FBQzVCLG1CQUFLLEtBQUssT0FBTztBQUFBLFlBQ3JCLE9BQU07QUFDRixzQkFBUSxLQUFLLE9BQU87QUFBQSxZQUN4QjtBQUFBLFVBQ0o7QUFBQSxRQUNKLENBQUM7QUFFRCxhQUFLLFFBQVEsQ0FBQyxZQUFZO0FBQ3RCLGNBQUksUUFBUSxTQUFTLE9BQU8sR0FBRztBQUMzQixpQkFBSyxPQUFPLEtBQUssUUFBUSxPQUFPLEdBQUcsQ0FBQztBQUNwQyxvQkFBUSxLQUFLLE9BQU87QUFBQSxVQUN4QjtBQUFBLFFBQ0osQ0FBQztBQUdELGdCQUFRLEtBQUssVUFBVTtBQUN2QixtQkFBVyxXQUFXLEdBQUcsS0FBSyxvQkFBb0IsUUFBUSxtQkFBbUIsUUFBUSxtQkFBbUIsUUFBUSxTQUFTLFFBQVEsMkJBQTJCLFdBQVcsVUFBVSxXQUFXO0FBQUEsR0FBaUIsU0FBUyxLQUFLO0FBQ3ZOLGNBQUksS0FBSztBQUFBLFVBRVAsT0FBTztBQUVMLG9CQUFRLElBQUksR0FBRyxLQUFLLG9CQUFvQixRQUFRLG1CQUFtQixRQUFRLG1CQUFtQixRQUFRLFNBQVMsUUFBUSxnQ0FBZ0MsU0FBUyxpQkFBaUIsV0FBVyxVQUFVLEdBQUc7QUFBQSxVQUMzTTtBQUFBLFFBRU4sQ0FBQztBQUFBLE1BR0wsT0FBTTtBQUNGLGdCQUFRLEtBQUssVUFBVTtBQUFBLE1BQzNCO0FBQUEsSUFDSixTQUFTLE9BQVA7QUFDRTtBQUFBLElBQ0o7QUFBQSxFQUNKO0FBQ0osR0FBRzsiLAogICJuYW1lcyI6IFsiaHJlZnMiXQp9Cg==

	